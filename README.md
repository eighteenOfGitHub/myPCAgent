

# Your Agent Project â€” æŠ€æœ¯æ–‡æ¡£ï¼ˆv0.2.0ï¼‰

---

## ä¸€ã€é¡¹ç›®ä»‹ç»

**Your Agent Project** æ˜¯ä¸€ä¸ªé¢å‘ä¸ªäºº PC çš„æœ¬åœ° AI Agent æ¡†æ¶ï¼Œæ—¨åœ¨æä¾›ï¼š

- **èƒ½åŠ›è·¯ç”±**ï¼šç»Ÿä¸€ç®¡ç†æœ¬åœ°/è¿œç¨‹çš„ LLMã€Embeddingã€å·¥å…·ç­‰**ç³»ç»Ÿèƒ½åŠ›**ï¼Œæ”¯æŒä¼˜å…ˆçº§è°ƒåº¦ä¸èƒ½åŠ›åŒ¹é…ï¼›
- **å·¥å…·é›†æˆ**ï¼šé€šè¿‡ MCPï¼ˆModel Calling Protocolï¼‰æ ‡å‡†æ¥å…¥å¤–éƒ¨å·¥å…·ï¼ˆå¦‚æœç´¢ã€ä»£ç æ‰§è¡Œã€è¯­éŸ³ï¼‰ï¼›
- **å¯¹è¯ç®¡ç†**ï¼šè®°å½•ä¼šè¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè½®äº¤äº’ä¸å·¥å…·è°ƒç”¨é“¾ï¼›
- **é…ç½®æŒä¹…åŒ–**ï¼šæ‰€æœ‰**ç³»ç»Ÿèƒ½åŠ›çš„å…ƒæ•°æ®**ï¼ˆå¦‚æ¨¡å‹åç§°ã€ç«¯ç‚¹ã€çŠ¶æ€ç­‰ï¼‰å­˜å‚¨äºæœ¬åœ° SQLite æ•°æ®åº“ï¼›
- **å¯è§‚æµ‹æ€§**ï¼šç³»ç»Ÿè¿è¡Œæ—¥å¿—ä»¥ **ç»“æ„åŒ–æ–‡æœ¬æ–‡ä»¶å½¢å¼å¤‡ä»½**ï¼Œä¾¿äºè°ƒè¯•ä¸å®¡è®¡ï¼›
- **Web ç®¡ç†ç•Œé¢**ï¼šåŸºäº **Gradio** æä¾›äº¤äº’å¼å‰ç«¯ï¼Œæ”¯æŒèƒ½åŠ›é…ç½®ç®¡ç†ã€æ—¥å¿—æŸ¥çœ‹ã€å®æ—¶èŠå¤©ã€‚

---

## äºŒã€ç‰ˆæœ¬æ–°å¢

### v0.2.0

 - å‰åç«¯åˆ†ç¦»

---

## ä¸‰ã€é¡¹ç›®ç»“æ„

```
your-agent-project/  
â”‚  
â”œâ”€â”€ main.py                      # å¤–å±‚å¯åŠ¨è„šæœ¬ï¼šåŒæ—¶å¯åŠ¨ backend å’Œ frontend  
â”‚  
â”œâ”€â”€ backend/                     # åç«¯æœåŠ¡ï¼ˆFastAPIï¼‰  
â”‚   â”œâ”€â”€ app.py                   # FastAPI åº”ç”¨å…¥å£  
â”‚   â”œâ”€â”€ core/  
â”‚   â”‚   â”œâ”€â”€ __init__.py          # from .version import __version__  
â”‚   â”‚   â”œâ”€â”€ version.py           # åŠ¨æ€åŠ è½½ __version__ = config.system.version  
â”‚   â”‚   â”œâ”€â”€ agent.py             # Agent ä¸»æ§ Orchestrator  
â”‚   â”‚   â”œâ”€â”€ llm_router.py        # å¤§æ¨¡å‹è·¯ç”±  
â”‚   â”‚   â”œâ”€â”€ tool_executor.py     # MCP å·¥å…·æ‰§è¡Œå™¨  
â”‚   â”‚   â”œâ”€â”€ database.py          # æ•°æ®åº“åˆå§‹åŒ–ã€è¿æ¥ç®¡ç†  
â”‚   â”‚   â”œâ”€â”€ bootstrap.py         # å¯åŠ¨å¼•å¯¼  
â”‚   â”‚   â””â”€â”€ db_models/           # æ•°æ®æ¨¡å‹ç›®å½•ï¼ˆä»…å®šä¹‰æ•°æ®åº“è¡¨ç»“æ„ï¼‰  
â”‚   â”‚       â”œâ”€â”€ __init__.py      # å¯¼å‡ºæ‰€æœ‰ SQLModel ç±»    
â”‚   â”‚       â””â”€â”€ base.py          # MCPTool (SQLModel)  
â”‚   â”‚  
â”‚   â”œâ”€â”€ api/   
â”‚   â”‚   â””â”€â”€ v1/  
â”‚   â”‚       â”œâ”€â”€ agents.py        # /api/v1/chat  
â”‚   â”‚       â”œâ”€â”€ capabilities.py  # /api/v1/capabilities (ç»Ÿä¸€ç®¡ç† LLM/Embedding ç­‰)  
â”‚   â”‚       â”œâ”€â”€ tools.py         # /api/v1/tools  
â”‚   â”‚       â””â”€â”€ logs.py          # /api/v1/logsï¼ˆè¯»å–æ—¥å¿—æ–‡ä»¶ï¼‰  
â”‚   â”‚  
â”‚   â”œâ”€â”€ config/  
â”‚   â”‚   â”œâ”€â”€ env_config.yaml      # æ ¸å¿ƒé…ç½®æ–‡ä»¶  
â”‚   â”‚   â””â”€â”€ settings.py          # ConfigLoader ç±»  
â”‚   â”‚  
â”‚   â”œâ”€â”€ data/  
â”‚   â”‚   â””â”€â”€ agent.db             # SQLite ä¸»æ•°æ®åº“ï¼ˆä»…å­˜èƒ½åŠ›/å·¥å…·å…ƒæ•°æ®ï¼‰  
â”‚   â”‚  
â”‚   â”œâ”€â”€ migrations/  
â”‚   â”‚   â”œâ”€â”€ __init__.py  
â”‚   â”‚   â”œâ”€â”€ v1_initial.py  
â”‚   â”‚   â””â”€â”€ v2_add_capability_type.py  
â”‚   â”‚  
â”‚   â”œâ”€â”€ logs/                    # åç«¯æ—¥å¿—æ–‡ä»¶   
â”‚   â”‚   â”œâ”€â”€ runtime.log              
â”‚   â”‚   â””â”€â”€ debug.log              
â”‚   â”‚  
â”‚   â””â”€â”€ requirements.txt  
â”‚  
â”œâ”€â”€ frontend/                    # å‰ç«¯ï¼ˆGradioï¼‰  
â”‚   â”œâ”€â”€ app.py                   # Gradio åº”ç”¨å…¥å£  
â”‚   â”œâ”€â”€ components/  
â”‚   â”‚   â”œâ”€â”€ chat_interface.py  
â”‚   â”‚   â”œâ”€â”€ tool_manager.py  
â”‚   â”‚   â””â”€â”€ log_viewer.py  
â”‚   â””â”€â”€ requirements.txt   
â”‚  
â”œâ”€â”€ shared/                      # å‰åç«¯å…±äº«ç±»å‹    
â”‚   â””â”€â”€ v1/    
â”‚       â””â”€â”€ schemas.py           # ç”± SQLModel è‡ªåŠ¨ç”Ÿæˆçš„ Pydantic æ¨¡å‹    
â”‚    
â”œâ”€â”€ .gitignore    
â””â”€â”€ README.md    
  
```  

## å››ã€æŠ€æœ¯é€‰å‹ä¸é…ç½®ç®¡ç†  

| ç±»åˆ« | æŠ€æœ¯/åº“ | ç‰ˆæœ¬/è¯´æ˜ | é€‰å‹ç†ç”± |
|------|--------|----------|--------|
| **æ ¸å¿ƒè¯­è¨€** | Python | â‰¥ 3.10 | ç”Ÿæ€ä¸°å¯Œï¼ŒAI å·¥å…·é“¾æˆç†Ÿï¼Œå¼€å‘æ•ˆç‡é«˜ |
| **åç«¯æ¡†æ¶** | FastAPI | æœ€æ–°ç¨³å®šç‰ˆ | âœ… é«˜æ€§èƒ½ï¼ˆStarlette + Pydanticï¼‰<br>âœ… è‡ªåŠ¨ç”Ÿæˆ OpenAPI æ–‡æ¡£<br>âœ… å¼‚æ­¥åŸç”Ÿæ”¯æŒï¼ˆé€‚åˆ LLM æµå¼è°ƒç”¨ï¼‰<br>âœ… ä¸ SQLModel æ·±åº¦é›†æˆ |
| **å‰ç«¯æ¡†æ¶** | Gradio | â‰¥ 4.0 | âœ… åŸç”Ÿ `gr.ChatInterface` æ”¯æŒæµå¼èŠå¤©<br>âœ… `gr.Dataframe` æä¾›å¼ºå¤§è¡¨æ ¼äº¤äº’ï¼ˆèƒ½åŠ›/å·¥å…·ç®¡ç†ï¼‰<br>âœ… å¿«é€Ÿæ„å»º AI äº¤äº’ç•Œé¢<br>âœ… å¯ç‹¬ç«‹éƒ¨ç½²ï¼Œé€šè¿‡ HTTP è°ƒç”¨åç«¯ API |
| **æ•°æ®åº“** | SQLite | å†…ç½®äº Python | âœ… é›¶é…ç½®ã€å•æ–‡ä»¶ã€ACID<br>âœ… å®Œç¾é€‚é…æœ¬åœ°å•æœºåœºæ™¯<br>âœ… ä»…å­˜å‚¨**èƒ½åŠ›/å·¥å…·å…ƒæ•°æ®**ï¼ˆéæ—¥å¿—ã€éæ¨¡å‹ï¼‰<br>âŒ ä¸é€‚ç”¨äºé«˜å¹¶å‘æˆ–å¤šç”¨æˆ·ï¼ˆä½†æœ¬é¡¹ç›®æ— éœ€ï¼‰ |
| **ORM / æ•°æ®æ¨¡å‹** | SQLModel | æœ€æ–°ç¨³å®šç‰ˆ | âœ… **æ ¸å¿ƒé€‰æ‹©**ï¼š<br>â€ƒ- ç»Ÿä¸€ Pydantic + SQLAlchemy<br>â€ƒ- `SQLModel` ç±» = æ•°æ®åº“è¡¨ = API Schema<br>â€ƒ- è‡ªåŠ¨åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼Œæ¶ˆé™¤æ¸¸æ ‡ç®¡ç†<br>â€ƒ- FastAPI å®˜æ–¹æ¨è<br>âœ… æ‰€æœ‰è¡¨ç»“æ„å®šä¹‰äº `backend/core/db_models/` |
| **æ—¥å¿—ç³»ç»Ÿ** | Python `logging` + `RotatingFileHandler` | æ ‡å‡†åº“ | âœ… **ä»…ä½¿ç”¨æ–‡ä»¶å¤‡ä»½**ï¼Œä¸å­˜æ•°æ®åº“<br>âœ… åˆ†ç¦» `runtime.log`ï¼ˆINFO+ï¼‰ä¸ `debug.log`ï¼ˆDEBUG+ï¼‰<br>âœ… æ”¯æŒæ—¥å¿—è½®è½¬ï¼ˆé˜²ç£ç›˜çˆ†æ»¡ï¼‰<br>âœ… æ ¼å¼å¯é…ç½®ï¼Œå…¼å®¹ `grep`/`tail` ç­‰å·¥å…· |
| **é…ç½®ç®¡ç†** | PyYAML + è‡ªå®šä¹‰ `ConfigLoader` | `pyyaml>=6.0` | âœ… é…ç½®é›†ä¸­äº `config/env_config.yaml`<br>âœ… åŠ¨æ€åŠ è½½ `system.version`ã€è·¯å¾„ã€æ—¥å¿—çº§åˆ«ç­‰<br>âœ… é¿å…ç¡¬ç¼–ç ï¼Œæ”¯æŒç¯å¢ƒå·®å¼‚åŒ–éƒ¨ç½² |
| **API è§„èŒƒ** | RESTful + JSON | â€” | âœ… `/api/v1/...` è·¯å¾„æ¸…æ™°<br>âœ… è¯·æ±‚/å“åº”ä½“ç”± SQLModel è‡ªåŠ¨ç”Ÿæˆ Pydantic æ¨¡å‹<br>âœ… å…¼å®¹æœªæ¥æ‰©å±•ï¼ˆv2, v3...ï¼‰ |
| **å…±äº«ç±»å‹** | `shared/v1/schemas.py` | ç”± SQLModel å¯¼å‡º | âœ… å‰åç«¯å…±ç”¨åŒä¸€å¥—æ•°æ®ç»“æ„å®šä¹‰<br>âœ… é¿å…ç±»å‹ä¸ä¸€è‡´å¯¼è‡´çš„ bug |
| **ç‰ˆæœ¬æ§åˆ¶** | è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰ | `vx.x.x` | âœ… `VERSION` æ–‡ä»¶ + `env_config.yaml` å£°æ˜ç‰ˆæœ¬<br>âœ… æ•°æ®åº“ Schema ç‰ˆæœ¬ç‹¬ç«‹ç®¡ç†ï¼ˆç”¨äºè¿ç§»ï¼‰ |
| **ä»£ç é£æ ¼** | Black + isort | â€” | âœ… è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œä¿è¯ä»£ç ä¸€è‡´æ€§ï¼ˆå»ºè®®åŠ å…¥ CIï¼‰ |
| **å¯é€‰ï¼šæ‰“åŒ…/åˆ†å‘** | PyInstaller / Docker | â€” | âœ… æœªæ¥å¯æ‰“åŒ…ä¸ºå•æ–‡ä»¶ EXE æˆ–å®¹å™¨é•œåƒ |

## äº”ã€ç¨‹åºå¯åŠ¨

ä»¥ä¸‹æ˜¯ **Your Agent Project v0.2.0 çš„å®Œæ•´ç¨‹åºå¯åŠ¨æµç¨‹è¯´æ˜**ï¼ŒåŒ…å«æ–‡å­—æè¿°ä¸æµç¨‹å›¾ï¼ˆä»¥ ASCII å½¢å¼å‘ˆç°ï¼‰ï¼Œæ¸…æ™°å±•ç¤ºä»ç”¨æˆ·æ‰§è¡Œå‘½ä»¤åˆ°å‰åç«¯å°±ç»ªçš„å…¨è¿‡ç¨‹ã€‚


### 1. ç”¨æˆ·è§¦å‘æ€»å¯åŠ¨å™¨
```bash
python main.py
```

### 2. æ€»å¯åŠ¨ç¨‹åºï¼ˆ`main.py`ï¼‰
- ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼›  
- è´Ÿè´£**å¹¶è¡Œå¯åŠ¨åç«¯ï¼ˆFastAPIï¼‰å’Œå‰ç«¯ï¼ˆGradioï¼‰**ï¼›  
- ä½¿ç”¨ `subprocess` åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹å­è¿›ç¨‹ï¼›  
- ç›‘å¬ `Ctrl+C` ä¿¡å·ï¼Œå®ç°ä¼˜é›…å…³é—­ã€‚  
  
### 3. è¡ç”Ÿå‡ºåç«¯å¯åŠ¨ç¨‹åºï¼ˆ`backend/main.py`ï¼‰  
 - å¯åŠ¨ backend/main.py  
 - ç«‹å³è°ƒç”¨ bootstrap.py æ‰§è¡Œå¯åŠ¨å¼•å¯¼  
 - å¼•å¯¼å®Œæˆåï¼Œå¯åŠ¨ FastAPI åº”ç”¨ï¼Œå¹¶ç›‘å¬é»˜è®¤åœ°å€ 127.0.0.1:8000 ä¸Šçš„HTTPè¯·æ±‚  

### 4. å¯åŠ¨å¼•å¯¼ç¨‹åºï¼ˆ`backend/core/bootstrap.py`ï¼‰  
è¿™æ˜¯åç«¯åˆå§‹åŒ–çš„æ ¸å¿ƒï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼š  
1. **åŠ è½½é…ç½®**ï¼šé€šè¿‡ `ConfigLoader` è¯»å– `config/env_config.yaml`ï¼›  
2. **è®¾ç½®æ—¥å¿—ç³»ç»Ÿ**ï¼šåˆå§‹åŒ– `runtime.log` å’Œï¼ˆå¯é€‰ï¼‰`debug.log`ï¼›  
3. **æ£€æŸ¥æ•°æ®åº“**ï¼š  
   - è‹¥ `data/agent.db` ä¸å­˜åœ¨ â†’ æ‰§è¡Œåˆå§‹è¿ç§»ï¼ˆ`migrations/v1_initial.py`ï¼‰ï¼›  
   - è‹¥å­˜åœ¨ä½† Schema ç‰ˆæœ¬ä½äºæœŸæœ›å€¼ â†’ è‡ªåŠ¨å‡çº§ï¼ˆå¦‚è¿è¡Œ `v2_add_capability_type.py`ï¼‰ï¼›  
4. **éªŒè¯å…³é”®è·¯å¾„**ï¼šç¡®ä¿ `logs/`ã€`data/` ç›®å½•å­˜åœ¨ï¼›  
5. **å®Œæˆå¼•å¯¼**ï¼ŒFastAPI æ­£å¼å°±ç»ªã€‚  

> âœ… **æ³¨æ„**ï¼š`bootstrap.py` æ˜¯ **åŒæ­¥é˜»å¡æ‰§è¡Œ** çš„ï¼Œç¡®ä¿æœåŠ¡åœ¨å®Œå…¨åˆå§‹åŒ–åæ‰æ¥å—è¯·æ±‚ã€‚

### 5. è¡ç”Ÿå‡ºå‰ç«¯å¯åŠ¨ç¨‹åºï¼ˆ`frontend/app.py`ï¼‰  
- å¯åŠ¨ Gradio åº”ç”¨ï¼›  
- é»˜è®¤ç›‘å¬ `127.0.0.1:7860`ã€‚

---

## ğŸ“Š å¯åŠ¨æµç¨‹å›¾ï¼ˆASCIIï¼‰

```text
+---------------------+
|   User runs:        |
|   python main.py    |
+----------+----------+
           |
           v
+----------+----------+
|   main.py (Root)    |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  |
|  â”‚ Start Backend â”‚â”€â”€â”¼â”€â”€â”€â–¶ backend/main.py
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  |
|  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  |
|  â”‚ Start Frontendâ”‚â”€â”€â”¼â”€â”€â”€â–¶ frontend/app.py
|  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  |
+----------+----------+
           |
           | (Graceful shutdown on Ctrl+C)
           â–¼
     [Both processes terminate]
```

### åç«¯å†…éƒ¨å¼•å¯¼æµç¨‹ï¼ˆ`backend/main.py` â†’ `bootstrap.py`ï¼‰

```text
backend/app.py
       â”‚
       â–¼
Load ConfigLoader from settings.py
       â”‚
       â–¼
Call bootstrap.initialize()
       â”‚
       â”œâ”€â”€â–¶ Load env_config.yaml
       â”‚
       â”œâ”€â”€â–¶ Setup logging:
       â”‚      â”œâ”€â”€ runtime.log (INFO+)
       â”‚      â””â”€â”€ debug.log (DEBUG+, if enabled)
       â”‚
       â”œâ”€â”€â–¶ Ensure data/ and logs/ exist
       â”‚
       â””â”€â”€â–¶ Database bootstrap:
              â”œâ”€â”€ Check agent.db exists?
              â”‚     â”œâ”€â”€ No â†’ Run v1_initial migration
              â”‚     â””â”€â”€ Yes â†’ Check schema version
              â”‚            â”œâ”€â”€ Match â†’ OK
              â”‚            â””â”€â”€ Lower â†’ Run pending migrations
              â”‚
              â–¼
       FastAPI server starts on http://127.0.0.1:8000
```

### å‰ç«¯å¯åŠ¨æµç¨‹ï¼ˆ`frontend/app.py`ï¼‰

```text
frontend/app.py
       â”‚
       â–¼
Initialize Gradio Blocks with Tabs:
       â”œâ”€â”€ ğŸ’¬ Chat       â†’ calls /api/v1/chat
       â”œâ”€â”€ ğŸ§  Capabilities â†’ calls /api/v1/capabilities
       â”œâ”€â”€ ğŸ› ï¸ Tools      â†’ calls /api/v1/tools
       â””â”€â”€ ğŸ“œ Logs       â†’ calls /api/v1/logs
       â”‚
       â–¼
Launch Gradio on http://127.0.0.1:7860
       â”‚
       â–¼
Open browser (or print URL)
```

---

## ğŸ” è¿›ç¨‹å…³ç³»æ€»ç»“

| è¿›ç¨‹ | å¯åŠ¨æ–¹å¼ | ä¾èµ– | é€šä¿¡æ–¹å¼ |
|------|--------|------|--------|
| **`main.py`** | ç”¨æˆ·ç›´æ¥è¿è¡Œ | æ—  | çˆ¶è¿›ç¨‹ï¼Œç®¡ç†å­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ |
| **`backend/app.py`** | `main.py` é€šè¿‡ `subprocess` å¯åŠ¨ | `env_config.yaml`, `agent.db` | æä¾› HTTP APIï¼ˆ`/api/v1/...`ï¼‰ |
| **`frontend/app.py`** | `main.py` é€šè¿‡ `subprocess` å¯åŠ¨ | åç«¯ API å¯ç”¨æ€§ | é€šè¿‡ HTTP è°ƒç”¨åç«¯æ¥å£ |






